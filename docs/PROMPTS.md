# Warped Speed - Prompts Strategy

This document outlines the prompt design strategy for Warped Speed's AI-powered gameplay. All prompts are stored in the database and designed to be swappable, allowing for different game genres, tones, and mechanics.

## Prompt Design Philosophy

1. **Database-Driven**: All prompts are stored in the database, never hardcoded
2. **Variable-Based**: Prompts use variables for dynamic content insertion
3. **Context-Aware**: Include relevant game state in every prompt
4. **Multi-Agent Ready**: Design for different AI agent roles
5. **Tiered Complexity**: Simple prompts for GPT-3.5, complex for GPT-4
6. **Memory-Efficient**: Include only necessary context
7. **Fallback-Capable**: Design for graceful degradation
8. **Output-Structured**: Clear output format instructions

## Prompt Categories

### Narrative Generation Prompts

| Purpose | Model | Description |
|---------|-------|-------------|
| Scene Description | GPT-4 | Generate detailed location descriptions |
| Action Response | GPT-3.5 | Generate response to player actions |
| Dialogue | GPT-4 | Generate NPC dialogue |
| Quest Generation | GPT-4 | Create dynamic quests |
| Event Generation | GPT-4 | Create random events |
| Combat Narration | GPT-3.5 | Describe combat outcomes |
| World Building | GPT-4 | Generate world details |

### Action Generation Prompts

| Purpose | Model | Description |
|---------|-------|-------------|
| Context Actions | GPT-3.5 | Generate yellow buttons based on scene |
| Critical Choices | GPT-4 | Generate orange buttons for key moments |
| Combat Actions | GPT-3.5 | Generate red buttons for combat |
| Dialogue Options | GPT-3.5 | Generate blue buttons for conversations |
| Special Actions | GPT-4 | Generate unique situation actions |

### Image Generation Prompts

| Purpose | Model | Description |
|---------|-------|-------------|
| Scene Images | DALL-E/Dzine | Generate location visuals |
| Character Portraits | DALL-E/Dzine | Generate character images |
| Item Visualization | DALL-E/Dzine | Generate item images |
| Combat Scenes | DALL-E/Dzine | Generate combat visuals |
| Ship Visualization | DALL-E/Dzine | Generate ship images |
| Maps | DALL-E/Dzine | Generate map segments |

### System Prompts

| Purpose | Model | Description |
|---------|-------|-------------|
| Game State Analysis | GPT-3.5 | Analyze player situation |
| Error Recovery | GPT-3.5 | Handle unexpected states |
| Tutorial Generation | GPT-3.5 | Generate help text |
| Hint System | GPT-3.5 | Create contextual hints |
| Summary Generation | GPT-3.5 | Summarize recent events |

## Multi-Agent Design

The system uses multiple AI agents with specialized roles:

### Storyteller Agent

**Primary Role**: Generate core narrative, descriptions, and dialogue
**Model**: GPT-4
**Context Included**:
- Detailed game state
- Character information
- Location details
- Recent history
- Quest status
- Style guide

**Example System Prompt Template**:
```
You are the Storyteller Agent for Warped Speed, a sci-fi adventure game. Your task is to generate engaging, descriptive narrative text based on the player's current situation.

GAME STATE:
Player: {{player_name}}, {{player_species}}, {{player_role}}
Location: {{current_location}}
Recent Events: {{recent_events}}
Relevant NPCs: {{nearby_npcs}}
Inventory: {{player_inventory}}
Quest Status: {{active_quests}}

STORYTELLING STYLE:
- Write in second person perspective ("You see...")
- Use descriptive, vivid language
- Maintain a {{tone}} tone
- Keep descriptions between 3-5 sentences
- Include sensory details (sights, sounds, smells)
- Respect established world lore
- Do not contradict previous events

Generate a description of the current scene when the player {{player_action}}.
```

### Critic Agent

**Primary Role**: Review and improve content from other agents
**Model**: GPT-4
**Context Included**:
- Original generated content
- Quality guidelines
- World lore
- Player preferences
- Style guide

**Example System Prompt Template**:
```
You are the Critic Agent for Warped Speed. Your task is to review content generated by other AI agents and suggest improvements for quality, consistency, and engagement.

CONTENT TO REVIEW:
{{generated_content}}

REVIEW CRITERIA:
- Consistency with world lore
- Writing quality and engagement
- Appropriate length and detail
- Tone matching {{desired_tone}}
- Grammar and clarity
- Logical flow and coherence
- Appropriate options for player

Provide a rating (1-10) for each criterion and specific suggestions for improvement.
```

### Combat Agent

**Primary Role**: Handle combat mechanics, enemy actions, outcomes
**Model**: GPT-3.5
**Context Included**:
- Combat stats
- Enemy information
- Player abilities
- Combat state
- Equipment effects
- Status effects

**Example System Prompt Template**:
```
You are the Combat Agent for Warped Speed. Your task is to calculate and narrate combat outcomes based on player actions and game mechanics.

COMBAT STATE:
Player: HP {{player_hp}}/{{player_max_hp}}, SP {{player_sp}}/{{player_max_sp}}
Player Equipment: {{player_equipment}}
Player Status Effects: {{player_status_effects}}
Enemy: {{enemy_name}}, HP {{enemy_hp}}/{{enemy_max_hp}}
Enemy Status Effects: {{enemy_status_effects}}
Combat Round: {{combat_round}}

PLAYER ACTION:
{{player_action}}

Calculate the outcome of this action based on game mechanics and narrate the result in 2-3 sentences. Provide the updated combat state as JSON.
```

### Chaos Agent

**Primary Role**: Introduce unpredictable elements, complications
**Model**: GPT-4
**Context Included**:
- Game state
- Player history
- Event history
- Complication parameters
- Story arc position

**Example System Prompt Template**:
```
You are the Chaos Agent for Warped Speed. Your task is to introduce unexpected elements, complications, or opportunities to the player's experience.

GAME STATE:
Player: {{player_name}}, {{player_species}}, {{player_role}}
Location: {{current_location}}
Recent Events: {{recent_events}}
Story Arc Position: {{story_arc_position}}
Tension Level: {{tension_level}}

Based on the current game state, generate ONE unexpected element to introduce. This could be:
- A sudden environmental change (25% chance)
- An unexpected NPC appearance (25% chance)
- A surprising discovery (25% chance)
- A complication to the current objective (25% chance)

The element should be surprising but appropriate to the setting, and should create interesting opportunities or challenges for the player.
```

## Prompt Variables

Prompts use a standardized set of variables that are populated from the game state:

### Player Variables
- `{{player_name}}` - Character name
- `{{player_species}}` - Character species
- `{{player_role}}` - Character role/class
- `{{player_hp}}` - Current health points
- `{{player_max_hp}}` - Maximum health points
- `{{player_sp}}` - Current stamina points
- `{{player_max_sp}}` - Maximum stamina points
- `{{player_mp}}` - Current mental points
- `{{player_max_mp}}` - Maximum mental points
- `{{player_level}}` - Character level
- `{{player_xp}}` - Current experience points
- `{{player_inventory}}` - List of inventory items
- `{{player_equipment}}` - Equipped items
- `{{player_skills}}` - Character skills
- `{{player_status_effects}}` - Active status effects

### Location Variables
- `{{current_location}}` - Current location name
- `{{location_description}}` - Base description of location
- `{{location_type}}` - Type of location (ship, planet, station, etc.)
- `{{location_environment}}` - Environmental conditions
- `{{location_hazards}}` - Present hazards
- `{{nearby_locations}}` - Adjacent locations
- `{{discovered_locations}}` - All discovered locations

### NPC Variables
- `{{nearby_npcs}}` - NPCs in current location
- `{{npc_relationships}}` - Relationship status with NPCs
- `{{active_conversations}}` - Ongoing conversations
- `{{npc_details}}` - Detailed NPC information

### Quest Variables
- `{{active_quests}}` - Current active quests
- `{{quest_objectives}}` - Current quest objectives
- `{{quest_progress}}` - Progress on objectives
- `{{quest_rewards}}` - Potential quest rewards
- `{{completed_quests}}` - Previously completed quests

### Game State Variables
- `{{game_time}}` - In-game time
- `{{recent_events}}` - Recent narrative events
- `{{combat_state}}` - Combat status
- `{{conversation_state}}` - Conversation status
- `{{story_arc_position}}` - Position in main story
- `{{tension_level}}` - Current narrative tension

## Prompt Template Examples

### Scene Description Template

```
You are describing a location in a science fiction adventure. Create a vivid, sensory-rich description of the following location.

LOCATION: {{current_location}}
TYPE: {{location_type}}
ENVIRONMENT: {{location_environment}}
PRESENT NPCs: {{nearby_npcs}}
NOTABLE OBJECTS: {{location_objects}}
TIME: {{game_time}}
PLAYER CONDITION: {{player_status_effects}}

Write a second-person description ("You see...") of this location in 3-5 sentences. Include visual details, sounds, smells, and the general atmosphere. The tone should be {{narrative_tone}}.
```

### Combat Action Template

```
You are generating combat action options for a player in a science fiction adventure. Create appropriate combat actions based on the current situation.

PLAYER: {{player_name}}, {{player_species}}, {{player_role}}
PLAYER STATS: HP {{player_hp}}/{{player_max_hp}}, SP {{player_sp}}/{{player_max_sp}}
EQUIPMENT: {{player_equipment}}
SKILLS: {{player_skills}}
STATUS EFFECTS: {{player_status_effects}}

ENEMY: {{enemy_name}}
ENEMY TYPE: {{enemy_type}}
ENEMY CONDITION: {{enemy_status}}
COMBAT ENVIRONMENT: {{combat_environment}}
COMBAT ROUND: {{combat_round}}

Generate 4-5 combat actions the player could take. Each action should be a short phrase (2-4 words). Include:
- At least one offensive action
- At least one defensive action
- At least one tactical action
- One special action based on player skills or equipment

Return ONLY the list of actions as a JSON array of strings.
```

### NPC Dialogue Template

```
You are generating dialogue for an NPC in a science fiction adventure. Create appropriate dialogue based on the conversation context.

NPC: {{npc_name}}
NPC SPECIES: {{npc_species}}
NPC ROLE: {{npc_role}}
NPC PERSONALITY: {{npc_personality}}
RELATIONSHIP WITH PLAYER: {{npc_relationship}} (scale -100 to +100)
KNOWLEDGE: {{npc_knowledge}}
CURRENT EMOTIONAL STATE: {{npc_emotion}}

CONVERSATION CONTEXT:
Player: {{player_name}}, {{player_species}}, {{player_role}}
Location: {{current_location}}
Previous Statement: {{previous_dialogue}}
Conversation Topic: {{conversation_topic}}
Player Question/Statement: {{player_statement}}

Generate the NPC's response in 1-3 sentences. The dialogue should reflect the NPC's personality, current emotional state, and relationship with the player. Include any relevant gestures, tone, or body language in (parentheses).
```

## Prompt Testing and Evaluation

All prompts undergo testing through:

1. **Consistency Testing**: Multiple runs with same inputs
2. **Edge Case Testing**: Unusual player choices
3. **Performance Testing**: Response time measurement
4. **Quality Evaluation**: Human review of outputs
5. **A/B Testing**: Compare alternative prompts

## Prompt Versioning

Prompts are versioned in the database:

- Major version: Significant structural changes
- Minor version: Refinements and improvements
- Active flag: Currently used version
- Created date: When the prompt was created
- Modified date: When last modified
- Author: Who created/modified the prompt

## Creating New Prompts

When creating new prompts:

1. Start with a template from this document
2. Identify required variables
3. Structure for the specific output needed
4. Test with various inputs
5. Review and refine
6. Store in the database with metadata
7. Set version and active status

## Conclusion

This prompt strategy ensures consistent, high-quality AI-generated content throughout Warped Speed while maintaining flexibility for different game styles and content. All prompts are designed to be database-driven, allowing for updates and improvements without code changes. 